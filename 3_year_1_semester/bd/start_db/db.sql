-- Таблица «Тип»
CREATE TABLE type (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL
);

-- Таблица «Районы»
CREATE TABLE district (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL
);

-- Таблица «Материалы здания»
CREATE TABLE building_material (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL
);

-- Таблица «Объект недвижимости»
CREATE TABLE property (
    id SERIAL PRIMARY KEY,
    district_id INTEGER NOT NULL REFERENCES district(id),
    address VARCHAR(255) NOT NULL,
    floor SMALLINT NOT NULL,
    room_count SMALLINT NOT NULL,
    type_id SMALLINT NOT NULL REFERENCES type(id),
    status BOOLEAN NOT NULL,
    price INTEGER NOT NULL,
    description TEXT,
    building_material_id INTEGER NOT NULL REFERENCES building_material(id),
    area SMALLINT NOT NULL,
    listing_date DATE NOT NULL
);

-- Таблица «Критерии оценки»
CREATE TABLE evaluation_criterion (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL
);

-- Таблица «Оценки»
CREATE TABLE evaluation (
    id SERIAL PRIMARY KEY,
    property_id INTEGER NOT NULL REFERENCES property(id),
    evaluation_date DATE NOT NULL,
    criterion_id SMALLINT NOT NULL REFERENCES evaluation_criterion(id),
    score DOUBLE PRECISION NOT NULL
);

-- Таблица «Риэлтор»
CREATE TABLE realtor (
    id SERIAL PRIMARY KEY,
    last_name VARCHAR(255) NOT NULL,
    first_name VARCHAR(255) NOT NULL,
    middle_name VARCHAR(255),
    phone_number VARCHAR(20) NOT NULL
);

-- Таблица «Продажа»
CREATE TABLE sale (
    id SERIAL PRIMARY KEY,
    property_id INTEGER NOT NULL REFERENCES property(id),
    sale_date DATE NOT NULL,
    realtor_id INTEGER NOT NULL REFERENCES realtor(id),
    price DOUBLE PRECISION NOT NULL
);

-- Заполнение таблицы type (3 строки)
INSERT INTO type (id, name) VALUES
(1, 'Квартира Швецов'),
(2, 'Дом Швецов'),
(3, 'Апартаменты Швецов');

-- Заполнение таблицы district (4 строки)
INSERT INTO district (id, name) VALUES
(1, 'Центральный Швецов'),
(2, 'Северный Швецов'),
(3, 'Южный Швецов'),
(4, 'Западный Швецов');

-- Заполнение таблицы building_material (2 строки)
INSERT INTO building_material (id, name) VALUES
(1, 'Панель Швецов'),
(2, 'Кирпич Швецов');

-- Заполнение таблицы property (30 строк)
INSERT INTO property (id, district_id, address, floor, room_count, type_id, status, price, description, building_material_id, area, listing_date) VALUES
(1, 1, 'ул. Ленина, 10', 3, 2, 1, true, 5000000, 'Квартира в центре города', 2, 45, '2023-01-15'),
(2, 1, 'ул. Советская, 25', 5, 3, 1, true, 7500000, 'Просторная квартира с ремонтом', 2, 65, '2023-02-10'),
(3, 2, 'ул. Северная, 5', 2, 1, 1, false, 3000000, 'Квартира в спальном районе', 1, 35, '2023-03-05'),
(4, 2, 'ул. Лесная, 15', 1, 2, 3, true, 6000000, 'Апартаменты с мебелью', 2, 50, '2023-01-20'),
(5, 3, 'ул. Южная, 30', 4, 4, 2, true, 12000000, 'Частный дом с участком', 2, 120, '2023-02-25'),
(6, 3, 'ул. Садовая, 8', 3, 3, 1, true, 5500000, 'Квартира с современным ремонтом', 1, 55, '2023-03-12'),
(7, 4, 'ул. Западная, 12', 2, 2, 1, false, 4800000, 'Квартира с видом на парк', 2, 48, '2023-01-30'),
(8, 4, 'ул. Речная, 7', 1, 1, 3, true, 4000000, 'Апартаменты у реки', 1, 40, '2023-02-15'),
(9, 1, 'пр. Мира, 20', 6, 3, 1, true, 8000000, 'Квартира на высоком этаже', 2, 70, '2023-03-20'),
(10, 2, 'ул. Сосновая, 3', 2, 2, 1, true, 4500000, 'Квартира в новом доме', 1, 42, '2023-01-10'),
(11, 3, 'ул. Полевая, 18', 3, 4, 2, false, 9500000, 'Дом с гаражом', 2, 90, '2023-02-05'),
(12, 4, 'ул. Горная, 22', 4, 3, 1, true, 6500000, 'Квартира с панорамными окнами', 2, 60, '2023-03-15'),
(13, 1, 'ул. Центральная, 11', 5, 2, 1, true, 5200000, 'Квартира рядом с метро', 1, 46, '2023-01-25'),
(14, 2, 'ул. Берёзовая, 9', 2, 1, 1, false, 3200000, 'Квартира для студента', 1, 33, '2023-02-20'),
(15, 3, 'ул. Дачная, 14', 1, 3, 2, true, 8500000, 'Дом с баней', 2, 80, '2023-03-10'),
(16, 4, 'ул. Водная, 6', 3, 2, 1, true, 5000000, 'Квартира у озера', 2, 50, '2023-01-05'),
(17, 1, 'пр. Победы, 17', 7, 4, 1, true, 9000000, 'Квартира с дизайнерским ремонтом', 2, 85, '2023-02-28'),
(18, 2, 'ул. Снежная, 4', 2, 2, 1, false, 4700000, 'Квартира в тихом районе', 1, 47, '2023-03-25'),
(19, 3, 'ул. Солнечная, 19', 3, 3, 2, true, 11000000, 'Дом с бассейном', 2, 100, '2023-01-15'),
(20, 4, 'ул. Луговая, 13', 4, 2, 1, true, 5800000, 'Квартира с балконом', 1, 52, '2023-02-10'),
(21, 1, 'ул. Новая, 21', 5, 3, 1, true, 7200000, 'Квартира в новостройке', 2, 68, '2023-03-05'),
(22, 2, 'ул. Старая, 2', 1, 1, 1, false, 2900000, 'Квартира эконом-класса', 1, 30, '2023-01-20'),
(23, 3, 'ул. Зелёная, 16', 2, 4, 2, true, 10500000, 'Дом с садом', 2, 110, '2023-02-25'),
(24, 4, 'ул. Каменная, 23', 3, 2, 1, true, 5100000, 'Квартира с камином', 2, 49, '2023-03-12'),
(25, 1, 'ул. Торговая, 26', 6, 3, 1, true, 7800000, 'Квартира рядом с торговым центром', 1, 72, '2023-01-30'),
(26, 2, 'ул. Школьная, 1', 2, 2, 1, false, 4600000, 'Квартира рядом со школой', 2, 44, '2023-02-15'),
(27, 3, 'ул. Парковая, 24', 3, 3, 2, true, 9800000, 'Дом у парка', 2, 95, '2023-03-20'),
(28, 4, 'ул. Моховая, 27', 4, 2, 1, true, 5400000, 'Квартира с террасой', 1, 51, '2023-01-10'),
(29, 1, 'ул. Береговая, 28', 5, 4, 1, true, 8500000, 'Квартира с видом на реку', 2, 80, '2023-02-05'),
(30, 2, 'ул. Хвойная, 29', 2, 1, 1, false, 3100000, 'Квартира в хрущёвке', 1, 32, '2023-03-15');

-- Заполнение таблицы evaluation_criterion (6 строк)
INSERT INTO evaluation_criterion (id, name) VALUES
(1, 'Экология Швецов'),
(2, 'Чистота Швецов'),
(3, 'Соседи Швецов'),
(4, 'Условия для детей Швецов'),
(5, 'Магазины Швецов'),
(6, 'Безопасность Швецов');

-- Заполнение таблицы evaluation (50 строк)
INSERT INTO evaluation (id, property_id, evaluation_date, criterion_id, score) VALUES
(1, 1, '2023-01-20', 1, 8.5),
(2, 1, '2023-01-20', 2, 7.2),
(3, 1, '2023-01-20', 3, 6.8),
(4, 1, '2023-01-20', 4, 7.5),
(5, 1, '2023-01-20', 5, 9.0),
(6, 2, '2023-02-15', 1, 7.8),
(7, 2, '2023-02-15', 2, 8.5),
(8, 2, '2023-02-15', 3, 8.2),
(9, 2, '2023-02-15', 4, 7.0),
(10, 2, '2023-02-15', 5, 8.7),
(11, 3, '2023-03-10', 1, 6.5),
(12, 3, '2023-03-10', 2, 7.0),
(13, 3, '2023-03-10', 3, 5.5),
(14, 3, '2023-03-10', 4, 6.0),
(15, 3, '2023-03-10', 5, 7.2),
(16, 4, '2023-01-25', 1, 9.2),
(17, 4, '2023-01-25', 2, 8.8),
(18, 4, '2023-01-25', 3, 9.0),
(19, 4, '2023-01-25', 4, 8.5),
(20, 4, '2023-01-25', 5, 9.5),
(21, 5, '2023-03-05', 1, 8.0),
(22, 5, '2023-03-05', 2, 7.5),
(23, 5, '2023-03-05', 3, 8.2),
(24, 5, '2023-03-05', 4, 9.0),
(25, 5, '2023-03-05', 5, 7.8),
(26, 6, '2023-03-17', 1, 7.2),
(27, 6, '2023-03-17', 2, 8.0),
(28, 6, '2023-03-17', 3, 7.5),
(29, 6, '2023-03-17', 4, 7.8),
(30, 6, '2023-03-17', 5, 8.2),
(31, 7, '2023-02-05', 1, 8.5),
(32, 7, '2023-02-05', 2, 7.0),
(33, 7, '2023-02-05', 3, 8.0),
(34, 7, '2023-02-05', 4, 7.2),
(35, 7, '2023-02-05', 5, 8.8),
(36, 8, '2023-02-20', 1, 9.0),
(37, 8, '2023-02-20', 2, 8.5),
(38, 8, '2023-02-20', 3, 9.2),
(39, 8, '2023-02-20', 4, 8.7),
(40, 8, '2023-02-20', 5, 9.5),
(41, 9, '2023-03-25', 1, 7.8),
(42, 9, '2023-03-25', 2, 8.2),
(43, 9, '2023-03-25', 3, 7.5),
(44, 9, '2023-03-25', 4, 8.0),
(45, 9, '2023-03-25', 5, 8.5),
(46, 10, '2023-01-15', 1, 6.8),
(47, 10, '2023-01-15', 2, 7.2),
(48, 10, '2023-01-15', 3, 6.5),
(49, 10, '2023-01-15', 4, 7.0),
(50, 10, '2023-01-15', 5, 7.5);

-- Заполнение таблицы realtor (5 строк)
INSERT INTO realtor (id, last_name, first_name, middle_name, phone_number) VALUES
(1, 'Швецов', 'Алексей', 'Петрович', '+79161234567'),
(2, 'Петрова', 'Мария', 'Ивановна', '+79167654321'),
(3, 'Сидоров', 'Дмитрий', 'Сергеевич', '+79169998877'),
(4, 'Кузнецова', 'Елена', 'Андреевна', '+79165554433'),
(5, 'Смирнов', 'Андрей', 'Владимирович', '+79162223344');

-- Заполнение таблицы sale (20 строк)
INSERT INTO sale (id, property_id, sale_date, realtor_id, price) VALUES
(1, 1, '2023-02-01', 1, 4950000.00),
(2, 2, '2023-03-01', 2, 7400000.00),
(3, 4, '2023-02-10', 3, 5900000.00),
(4, 5, '2023-04-01', 4, 11800000.00),
(5, 6, '2023-04-05', 5, 5400000.00),
(6, 8, '2023-03-15', 1, 3900000.00),
(7, 9, '2023-04-10', 2, 7850000.00),
(8, 10, '2023-02-28', 3, 4400000.00),
(9, 12, '2023-04-15', 4, 6400000.00),
(10, 13, '2023-03-05', 5, 5100000.00),
(11, 15, '2023-04-20', 1, 8300000.00),
(12, 16, '2023-02-15', 2, 4900000.00),
(13, 17, '2023-05-01', 3, 8850000.00),
(14, 19, '2023-04-25', 4, 10800000.00),
(15, 20, '2023-03-20', 5, 5700000.00),
(16, 22, '2023-02-25', 1, 2800000.00),
(17, 24, '2023-05-05', 2, 5000000.00),
(18, 25, '2023-04-30', 3, 7600000.00),
(19, 27, '2023-05-10', 4, 9600000.00),
(20, 29, '2023-05-15', 5, 8350000.00);

-- Сброс последовательностей для всех таблиц
SELECT setval('type_id_seq', (SELECT MAX(id) FROM type));
SELECT setval('district_id_seq', (SELECT MAX(id) FROM district));
SELECT setval('building_material_id_seq', (SELECT MAX(id) FROM building_material));
SELECT setval('property_id_seq', (SELECT MAX(id) FROM property));
SELECT setval('evaluation_criterion_id_seq', (SELECT MAX(id) FROM evaluation_criterion));
SELECT setval('evaluation_id_seq', (SELECT MAX(id) FROM evaluation));
SELECT setval('realtor_id_seq', (SELECT MAX(id) FROM realtor));
SELECT setval('sale_id_seq', (SELECT MAX(id) FROM sale));