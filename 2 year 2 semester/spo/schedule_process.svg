<svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="1200" height="800" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold">Диаграмма бизнес-процесса формирования расписания матчей</text>
  
  <!-- Pool for Manager -->
  <rect x="50" y="70" width="1100" height="650" fill="none" stroke="#333" stroke-width="2"/>
  <text x="60" y="90" font-family="Arial" font-size="14" font-weight="bold">Менеджер соревнований</text>
  
  <!-- Start Event -->
  <circle cx="120" cy="200" r="20" fill="#c8e6c9" stroke="#4caf50" stroke-width="3"/>
  <text x="120" y="206" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">Старт</text>
  <text x="120" y="240" text-anchor="middle" font-family="Arial" font-size="11">Начать планирование</text>
  <text x="120" y="254" text-anchor="middle" font-family="Arial" font-size="11">расписания</text>
  
  <!-- Task 1: Получить список команд -->
  <rect x="200" y="160" width="120" height="80" rx="10" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
  <text x="260" y="190" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold">Получить список</text>
  <text x="260" y="205" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold">команд из БД</text>
  <text x="260" y="225" text-anchor="middle" font-family="Arial" font-size="10">(Автоматически)</text>
  
  <!-- Gateway: Команды получены? -->
  <polygon points="380,180 420,200 380,220 340,200" fill="#fff9c4" stroke="#fbc02d" stroke-width="2"/>
  <text x="380" y="195" text-anchor="middle" font-family="Arial" font-size="10">Команды</text>
  <text x="380" y="208" text-anchor="middle" font-family="Arial" font-size="10">получены?</text>
  
  <!-- Task 2: Выбрать стадионы -->
  <rect x="480" y="160" width="120" height="80" rx="10" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
  <text x="540" y="185" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold">Выбрать доступные</text>
  <text x="540" y="200" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold">стадионы</text>
  <text x="540" y="220" text-anchor="middle" font-family="Arial" font-size="10">(Ручной выбор)</text>
  
  <!-- Task 3: Задать даты и время -->
  <rect x="660" y="160" width="120" height="80" rx="10" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
  <text x="720" y="185" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold">Задать даты</text>
  <text x="720" y="200" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold">и время матчей</text>
  <text x="720" y="220" text-anchor="middle" font-family="Arial" font-size="10">(Ручной ввод)</text>
  
  <!-- Task 4: Создать пары команд -->
  <rect x="840" y="160" width="120" height="80" rx="10" fill="#fff3e0" stroke="#ff9800" stroke-width="2"/>
  <text x="900" y="185" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold">Сформировать</text>
  <text x="900" y="200" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold">пары команд</text>
  <text x="900" y="220" text-anchor="middle" font-family="Arial" font-size="10">(Алгоритм)</text>
  
  <!-- Gateway: Проверка конфликтов -->
  <polygon points="900,300 940,320 900,340 860,320" fill="#fff9c4" stroke="#fbc02d" stroke-width="2"/>
  <text x="900" y="315" text-anchor="middle" font-family="Arial" font-size="10">Есть</text>
  <text x="900" y="328" text-anchor="middle" font-family="Arial" font-size="10">конфликты?</text>
  
  <!-- Task 5: Разрешить конфликты -->
  <rect x="1000" y="280" width="120" height="80" rx="10" fill="#ffebee" stroke="#f44336" stroke-width="2"/>
  <text x="1060" y="305" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold">Разрешить</text>
  <text x="1060" y="320" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold">конфликты</text>
  <text x="1060" y="340" text-anchor="middle" font-family="Arial" font-size="10">(Ручная корректировка)</text>
  
  <!-- Task 6: Сохранить расписание -->
  <rect x="660" y="400" width="120" height="80" rx="10" fill="#e8f5e8" stroke="#4caf50" stroke-width="2"/>
  <text x="720" y="425" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold">Сохранить</text>
  <text x="720" y="440" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold">расписание в БД</text>
  <text x="720" y="460" text-anchor="middle" font-family="Arial" font-size="10">(Автоматически)</text>
  
  <!-- Task 7: Уведомить команды -->
  <rect x="840" y="400" width="120" height="80" rx="10" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
  <text x="900" y="425" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold">Уведомить</text>
  <text x="900" y="440" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold">команды</text>
  <text x="900" y="460" text-anchor="middle" font-family="Arial" font-size="10">(Email/SMS)</text>
  
  <!-- End Event -->
  <circle cx="900" cy="580" r="20" fill="#ffcdd2" stroke="#f44336" stroke-width="3"/>
  <circle cx="900" cy="580" r="16" fill="#f44336"/>
  <text x="900" y="620" text-anchor="middle" font-family="Arial" font-size="11">Расписание готово</text>
  
  <!-- Error Event -->
  <circle cx="380" cy="320" r="20" fill="#fff3e0" stroke="#ff9800" stroke-width="3"/>
  <text x="380" y="326" text-anchor="middle" font-family="Arial" font-size="12">!</text>
  <text x="380" y="350" text-anchor="middle" font-family="Arial" font-size="10">Ошибка получения</text>
  <text x="380" y="362" text-anchor="middle" font-family="Arial" font-size="10">данных</text>
  
  <!-- Arrows -->
  <!-- Start to Task 1 -->
  <line x1="140" y1="200" x2="200" y2="200" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Task 1 to Gateway -->
  <line x1="320" y1="200" x2="340" y2="200" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Gateway to Task 2 (Yes) -->
  <line x1="420" y1="200" x2="480" y2="200" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="445" y="195" text-anchor="middle" font-family="Arial" font-size="10" fill="#4caf50">Да</text>
  
  <!-- Gateway to Error (No) -->
  <line x1="380" y1="220" x2="380" y2="300" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="385" y="260" font-family="Arial" font-size="10" fill="#f44336">Нет</text>
  
  <!-- Task 2 to Task 3 -->
  <line x1="600" y1="200" x2="660" y2="200" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Task 3 to Task 4 -->
  <line x1="780" y1="200" x2="840" y2="200" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Task 4 to Gateway 2 -->
  <line x1="900" y1="240" x2="900" y2="300" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Gateway 2 to Task 5 (Yes) -->
  <line x1="940" y1="320" x2="1000" y2="320" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="965" y="315" text-anchor="middle" font-family="Arial" font-size="10" fill="#f44336">Да</text>
  
  <!-- Task 5 back to Task 4 -->
  <line x1="1060" y1="280" x2="1060" y2="200" stroke="#333" stroke-width="2"/>
  <line x1="1060" y1="200" x2="960" y2="200" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Gateway 2 to Task 6 (No) -->
  <line x1="860" y1="320" x2="720" y2="320" stroke="#333" stroke-width="2"/>
  <line x1="720" y1="320" x2="720" y2="400" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="790" y="315" text-anchor="middle" font-family="Arial" font-size="10" fill="#4caf50">Нет</text>
  
  <!-- Task 6 to Task 7 -->
  <line x1="780" y1="440" x2="840" y2="440" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Task 7 to End -->
  <line x1="900" y1="480" x2="900" y2="560" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
  </defs>
  
  <!-- Legend -->
  <g transform="translate(50, 500)">
    <rect x="0" y="0" width="180" height="180" fill="white" stroke="#ccc" stroke-width="1" rx="5"/>
    <text x="10" y="20" font-family="Arial" font-size="12" font-weight="bold">Легенда элементов:</text>
    
    <circle cx="20" cy="40" r="8" fill="#c8e6c9" stroke="#4caf50" stroke-width="2"/>
    <text x="35" y="45" font-family="Arial" font-size="10">Событие начала</text>
    
    <circle cx="20" cy="60" r="8" fill="#ffcdd2" stroke="#f44336" stroke-width="2"/>
    <text x="35" y="65" font-family="Arial" font-size="10">Событие завершения</text>
    
    <rect x="12" y="75" width="16" height="10" rx="2" fill="#e3f2fd" stroke="#2196f3" stroke-width="1"/>
    <text x="35" y="84" font-family="Arial" font-size="10">Задача пользователя</text>
    
    <rect x="12" y="95" width="16" height="10" rx="2" fill="#fff3e0" stroke="#ff9800" stroke-width="1"/>
    <text x="35" y="104" font-family="Arial" font-size="10">Системная задача</text>
    
    <polygon points="16,115 24,120 16,125 8,120" fill="#fff9c4" stroke="#fbc02d" stroke-width="1"/>
    <text x="35" y="124" font-family="Arial" font-size="10">Условие (шлюз)</text>
    
    <circle cx="20" cy="140" r="8" fill="#fff3e0" stroke="#ff9800" stroke-width="2"/>
    <text x="20" y="144" text-anchor="middle" font-family="Arial" font-size="8">!</text>
    <text x="35" y="145" font-family="Arial" font-size="10">Событие ошибки</text>
    
    <line x1="10" y1="160" x2="25" y2="160" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="35" y="165" font-family="Arial" font-size="10">Поток выполнения</text>
  </g>
</svg>